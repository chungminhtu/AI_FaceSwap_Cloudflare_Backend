<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Face Swap AI - API Documentation</title>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lexend+Deca:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify@4/lib/themes/buble.css">
  <style>
    * {
      font-family: 'Lexend Deca', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    
    :root {
      --theme-color: #3b82f6;
      --theme-color-dark: #2563eb;
      --sidebar-width: 380px;
      --content-max-width: 95%;
    }
    
    body {
      font-family: 'Lexend Deca', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-weight: 400;
    }
    
    .app-name-link img {
      max-width: 200px;
    }
    
    .sidebar {
      background: #ffffff;
      border-right: 1px solid #e5e7eb;
      width: var(--sidebar-width) !important;
    }
    
    .sidebar-toggle {
      display: none !important;
    }
    
    @media (max-width: 768px) {
      .sidebar {
        width: var(--sidebar-width) !important;
        transform: translateX(0) !important;
      }
    }
    
    .sidebar ul li a {
      color: #374151;
      font-weight: 400;
      font-family: 'Lexend Deca', sans-serif;
    }
    
    .sidebar ul li a:hover {
      color: var(--theme-color);
      background: rgba(59, 130, 246, 0.05);
    }
    
    .sidebar ul li.active > a {
      color: var(--theme-color);
      background: rgba(59, 130, 246, 0.1);
      border-left: 3px solid var(--theme-color);
      font-weight: 500;
    }
    
    .markdown-section {
      max-width: var(--content-max-width) !important;
      width: var(--content-max-width) !important;
      padding: 2rem 3rem;
    }
    
    @media (min-width: 1400px) {
      .markdown-section {
        max-width: 1400px !important;
        width: 1400px !important;
      }
    }
    
    .markdown-section h1 {
      color: #1f2937;
      border-bottom: 2px solid var(--theme-color);
      padding-bottom: 10px;
      font-weight: 600;
      font-family: 'Lexend Deca', sans-serif;
    }
    
    .markdown-section h2 {
      color: #374151;
      margin-top: 40px;
      font-weight: 600;
      font-family: 'Lexend Deca', sans-serif;
    }
    
    .markdown-section h3 {
      color: #4b5563;
      margin-top: 30px;
      font-weight: 500;
      font-family: 'Lexend Deca', sans-serif;
    }
    
    .markdown-section p,
    .markdown-section li {
      font-family: 'Lexend Deca', sans-serif;
      font-weight: 400;
      line-height: 1.7;
      color: #4b5563;
    }
    
    .markdown-section code {
      font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', 'Monaco', 'Courier New', monospace !important;
      background: #f3f4f6;
      color: #dc2626;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 0.9em;
      font-weight: 400;
    }
    
    .markdown-section pre {
      background: #1f2937;
      border-left: 4px solid var(--theme-color);
      border-radius: 6px;
      padding: 1.5rem;
      overflow-x: auto;
    }
    
    .markdown-section pre code {
      font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', 'Monaco', 'Courier New', monospace !important;
      background: transparent;
      color: #e5e7eb;
      padding: 0;
      font-size: 0.9em;
      font-weight: 400;
      line-height: 1.6;
    }
    
    .markdown-section blockquote {
      border-left: 4px solid var(--theme-color);
      background: rgba(59, 130, 246, 0.05);
      padding: 1rem 1.5rem;
      margin: 1.5rem 0;
      border-radius: 4px;
    }
    
    .markdown-section blockquote p {
      color: #4b5563;
      margin: 0;
    }
    
    .app-name {
      font-size: 24px;
      font-weight: 600;
      color: var(--theme-color);
      font-family: 'Lexend Deca', sans-serif;
    }
    
    .cover {
      background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 50%, #bfdbfe 100%);
    }
    
    .cover-main {
      color: #1f2937;
    }
    
    .cover-main h1 {
      color: var(--theme-color);
      font-family: 'Lexend Deca', sans-serif;
      font-weight: 600;
    }
    
    .cover-main p {
      color: #4b5563;
      font-family: 'Lexend Deca', sans-serif;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 1.5rem 0;
    }
    
    table th,
    table td {
      padding: 0.75rem;
      border: 1px solid #e5e7eb;
      text-align: left;
      font-family: 'Lexend Deca', sans-serif;
    }
    
    table th {
      background: #f9fafb;
      font-weight: 600;
      color: #374151;
    }
    
    table tr:hover {
      background: #f9fafb;
    }
    
    .search input {
      font-family: 'Lexend Deca', sans-serif;
    }
  </style>
</head>
<body>
  <div id="app">Loading...</div>
  
  <script>
    // Embedded markdown content
    window.__staticDocs = {
      'API_TONG_QUAN_VI.md': `# T·ªïng quan API Face Swap AI

T√†i li·ªáu n√†y m√¥ t·∫£ ƒë·∫ßy ƒë·ªß c√°c ƒëi·ªÉm cu·ªëi (endpoint) m√† Cloudflare Worker cung c·∫•p sau khi c·∫≠p nh·∫≠t c·∫•u tr√∫c ph·∫£n h·ªìi v·ªõi tr∆∞·ªùng \`debug\`.

## 1. POST \`/faceswap\`

### N·ªôi dung y√™u c·∫ßu

- \`target_url\` (string, b·∫Øt bu·ªôc): URL ·∫£nh m·ª•c ti√™u (preset).
- \`source_url\` (string, b·∫Øt bu·ªôc): URL ·∫£nh ngu·ªìn (selfie).
- \`mode\` (string, t√πy ch·ªçn): \`rapidapi\` ho·∫∑c \`vertex\`. M·∫∑c ƒë·ªãnh \`rapidapi\`.
- \`api_provider\` (string, t√πy ch·ªçn): ch·∫•p nh·∫≠n \`google-nano-banana\` ƒë·ªÉ k√≠ch ho·∫°t ch·∫ø ƒë·ªô Vertex.
- \`preset_image_id\`, \`preset_collection_id\`, \`preset_name\` (string, t√πy ch·ªçn): th√¥ng tin preset ƒë√£ ch·ªçn.
- \`selfie_id\` (string, t√πy ch·ªçn): m√£ selfie ƒë√£ l∆∞u trong c∆° s·ªü d·ªØ li·ªáu.
- \`additional_prompt\` (string, t√πy ch·ªçn): c√¢u m√¥ t·∫£ b·ªï sung, ƒë∆∞·ª£c n·ªëi v√†o cu·ªëi tr∆∞·ªùng \`prompt\` b·∫±ng k√Ω t·ª± \`+\` (ch·ªâ √°p d·ª•ng cho ch·∫ø ƒë·ªô Vertex).
- \`character_gender\` (string, t√πy ch·ªçn): \`male\`, \`female\` ho·∫∑c b·ªè tr·ªëng (\`none\`). N·∫øu truy·ªÅn, h·ªá th·ªëng ch√®n m√¥ t·∫£ gi·ªõi t√≠nh t∆∞∆°ng ·ª©ng v√†o cu·ªëi \`prompt\`.

### Ph·∫£n h·ªìi th√†nh c√¥ng

\`\`\`json
{
  "data": {
    "resultImageUrl": "https://.../results/result_123.jpg"
  },
  "debug": {
    "request": {
      "mode": "vertex",
      "targetUrl": "https://...",
      "sourceUrl": "https://..."
    },
    "provider": {
      "success": true,
      "statusCode": 200,
      "message": "Processing successful",
      "finalResultImageUrl": "https://.../results/result_123.jpg",
      "debug": {
        "endpoint": "https://...",
        "status": 200,
        "durationMs": 843
      }
    },
    "vertex": {
      "prompt": { "...": "..." },
      "debug": {
        "endpoint": "https://.../generateContent",
        "status": 200,
        "durationMs": 5180,
        "requestPayload": {
          "promptLength": 746,
          "imageBytes": 921344
        }
      }
    },
    "vision": {
      "checked": false,
      "isSafe": true,
      "error": "Safety check skipped for Vertex AI mode"
    },
    "storage": {
      "attemptedDownload": true,
      "downloadStatus": 200,
      "savedToR2": true,
      "r2Key": "results/result_123.jpg",
      "publicUrl": "https://.../results/result_123.jpg"
    },
    "database": {
      "attempted": true,
      "success": true,
      "resultId": "result_..."
    }
  },
  "status": "success",
  "message": "Processing successful",
  "code": 200
}
\`\`\`

### Ph·∫£n h·ªìi l·ªói

- L·ªói ki·ªÉm duy·ªát (Google Vision) tr·∫£ v·ªÅ HTTP 422:

\`\`\`json
{
  "data": null,
  "debug": {
    "provider": { "...": "..." },
    "vision": {
      "checked": true,
      "isSafe": false,
      "violationCategory": "adult",
      "violationLevel": "VERY_LIKELY",
      "debug": {
        "endpoint": "https://vision.googleapis.com/v1/images:annotate",
        "status": 200
      }
    }
  },
  "status": "error",
  "message": "Content blocked: Image contains adult content (VERY_LIKELY)",
  "code": 422
}
\`\`\`

- C√°c l·ªói kh√°c (RapidAPI, Vertex, l∆∞u tr·ªØ...) tr·∫£ v·ªÅ HTTP t∆∞∆°ng ·ª©ng v·ªõi th√¥ng tin chi ti·∫øt trong \`debug.provider.debug\` ho·∫∑c \`debug.vertex.debug\`.

## 2. POST \`/upload-url\`

### M·ª•c ƒë√≠ch

T·∫°o URL t·∫°m ƒë·ªÉ tr√¨nh duy·ªát t·∫£i ·∫£nh l√™n th√¥ng qua Worker (\`/upload-proxy/{key}\`) v√† l·∫•y URL c√¥ng khai R2.

### N·ªôi dung y√™u c·∫ßu

- \`filename\` (string, b·∫Øt bu·ªôc): t√™n t·ªáp.
- \`type\` (string, b·∫Øt bu·ªôc): \`preset\` ho·∫∑c \`selfie\`.
- \`presetName\` (string, t√πy ch·ªçn): t√™n b·ªô s∆∞u t·∫≠p preset.
- \`enableVertexPrompt\` (boolean, t√πy ch·ªçn): b·∫≠t t·∫°o prompt Vertex khi upload preset.

### Ph·∫£n h·ªìi

\`\`\`json
{
  "uploadUrl": "https://<worker-domain>/upload-proxy/preset/example.jpg",
  "publicUrl": "https://pub-...r2.dev/preset/example.jpg",
  "key": "preset/example.jpg",
  "presetName": "Studio Neon",
  "enableVertexPrompt": true
}
\`\`\`

## 3. PUT \`/upload-proxy/{key}\`

### M·ª•c ƒë√≠ch

Nh·∫≠n d·ªØ li·ªáu nh·ªã ph√¢n t·ª´ tr√¨nh duy·ªát, l∆∞u v√†o R2 v√† c·∫≠p nh·∫≠t c∆° s·ªü d·ªØ li·ªáu (preset/selfie).

### Header quan tr·ªçng

- \`Content-Type\`: mime-type ·∫£nh.
- \`X-Preset-Name\` (t√πy ch·ªçn): t√™n b·ªô s∆∞u t·∫≠p preset.
- \`X-Enable-Vertex-Prompt\`, \`X-Enable-Vision-Scan\` (t√πy ch·ªçn): b·∫≠t Vertex/Vision.

### Ph·∫£n h·ªìi th√†nh c√¥ng (preset)

\`\`\`json
{
  "success": true,
  "url": "https://.../preset/example.jpg",
  "id": "image_...",
  "filename": "example.jpg",
  "hasPrompt": true,
  "prompt_json": { "...": "..." },
  "vertex_info": {
    "success": true,
    "promptKeys": ["prompt", "style", "..."],
    "debug": {
      "endpoint": "https://.../generateContent",
      "status": 200,
      "responseTimeMs": 4200
    }
  },
  "vision_scan": {
    "success": true,
    "isSafe": true,
    "rawResponse": { "...": "..." }
  }
}
\`\`\`

### Ph·∫£n h·ªìi th√†nh c√¥ng (selfie)

\`\`\`json
{
  "success": true,
  "url": "https://.../selfie/example.jpg",
  "id": "selfie_...",
  "filename": "example.jpg"
}
\`\`\`

## 4. GET \`/presets\`

- Tr·∫£ v·ªÅ danh s√°ch preset trong c∆° s·ªü d·ªØ li·ªáu.
- Ph·∫£n h·ªìi d·∫°ng \`{ "presets": [ { "id": "...", "image_url": "...", "prompt_json": "...", ... } ] }\`.

## 5. DELETE \`/presets/{id}\`

- X√≥a preset kh·ªèi D1 v√† R2.
- Ph·∫£n h·ªìi:

\`\`\`json
{
  "success": true,
  "message": "Preset deleted successfully",
  "debug": {
    "presetId": "...",
    "databaseDeleted": 1,
    "r2Deleted": true,
    "r2Key": "preset/example.jpg"
  }
}
\`\`\`

## 6. GET \`/selfies\`

- Tr·∫£ v·ªÅ t·ªëi ƒëa 50 selfie g·∫ßn nh·∫•t.
- Ph·∫£n h·ªìi d·∫°ng \`{ "selfies": [ { "id": "...", "image_url": "...", "filename": "...", ... } ] }\`.

## 7. DELETE \`/selfies/{id}\`

- X√≥a selfie v√† k·∫øt qu·∫£ li√™n quan.
- Ph·∫£n h·ªìi t∆∞∆°ng t·ª± \`/presets/{id}\` v·ªõi tr∆∞·ªùng \`debug\` m√¥ t·∫£ t√°c v·ª•.

## 8. GET \`/results\`

- Tr·∫£ v·ªÅ t·ªëi ƒëa 50 k·∫øt qu·∫£ face swap g·∫ßn nh·∫•t.
- Ph·∫£n h·ªìi: \`{ "results": [ { "id": "...", "result_url": "...", ... } ] }\`.

## 9. DELETE \`/results/{id}\`

- X√≥a k·∫øt qu·∫£ kh·ªèi D1 v√† R2.
- Ph·∫£n h·ªìi:

\`\`\`json
{
  "success": true,
  "message": "Result deleted successfully",
  "debug": {
    "resultId": "...",
    "databaseDeleted": 1,
    "r2Deleted": true,
    "r2Key": "results/result_123.jpg"
  }
}
\`\`\`

## 10. GET \`/vertex/get-prompt/{preset_image_id}\`

- Tr·∫£ v·ªÅ prompt ƒë√£ l∆∞u cho preset.
- Ph·∫£n h·ªìi:

\`\`\`json
{
  "success": true,
  "presetImage": {
    "id": "...",
    "image_url": "...",
    "hasPrompt": true,
    "promptJson": { "...": "..." }
  }
}
\`\`\`

## 11. POST \`/test-safety\`

- Body: \`{ "image_url": "https://..." }\`.
- Ph·∫£n h·ªìi: \`{ "success": true, "imageUrl": "...", "result": { "isSafe": true, ... }, "timestamp": "..." }\`.

## 12. GET \`/test-vertex\`

- Ki·ªÉm tra k·∫øt n·ªëi Vertex (li·ªát k√™ model).
- Ph·∫£n h·ªìi ch·ª©a tr·∫°ng th√°i HTTP th·ª±c t·∫ø, danh s√°ch model v√† l·ªói n·∫øu c√≥.

---

C√°c ph·∫£n h·ªìi l·ªói t·ª´ Worker ƒë·ªÅu tu√¢n th·ªß m·ªôt trong hai d·∫°ng:

1. L·ªói chung: \`{ "Success": false, "Message": "...", "StatusCode": 500, "Debug": { ... } }\` (ƒë·ªëi v·ªõi c√°c endpoint c≈© ch∆∞a chuy·ªÉn sang c·∫•u tr√∫c m·ªõi).
2. L·ªói chu·∫©n h√≥a: \`{ "data": null, "debug": { ... }, "status": "error", "message": "...", "code": 4xx/5xx }\`.

Tr∆∞·ªùng \`debug\` lu√¥n ch·ª©a th√¥ng tin chi ti·∫øt gi√∫p truy v·∫øt: endpoint g·ªçi t·ªõi, th·ªùi gian ph·∫£n h·ªìi, payload g·ª≠i ƒëi, ph·∫£n h·ªìi g·ªëc (ƒë√£ ƒë∆∞·ª£c kh·ª≠ d·ªØ li·ªáu nh·∫°y c·∫£m nh∆∞ base64) v√† c√°c kh√≥a ph·ª• (\`vertex\`, \`vision\`, \`storage\`, \`database\`) t√πy v√†o ng·ªØ c·∫£nh.

`,
      'README.md': `# Static Docsify Documentation

This directory contains the API documentation that can be built as a fully static HTML file with working search functionality.

## Building Static Documentation

To generate a static HTML file with all content embedded and working search:

\`\`\`bash
node build-static.js
\`\`\`

This will create \`index-static.html\` which is a single, self-contained HTML file that:
- ‚úÖ Contains all markdown content embedded
- ‚úÖ Has working search functionality
- ‚úÖ Works without a server (can be opened directly in browser)
- ‚úÖ Can be deployed to any static hosting (Cloudflare Pages, GitHub Pages, etc.)

## Usage

### For Local Development

1. Use the regular \`index.html\` with Docsify server:
   \`\`\`bash
   docsify serve .
   \`\`\`

### For Static Hosting

1. Build the static version:
   \`\`\`bash
   node build-static.js
   \`\`\`

2. Deploy \`index-static.html\` to your static hosting:
   - **Cloudflare Pages**: Upload \`index-static.html\` and rename it to \`index.html\`
   - **GitHub Pages**: Commit \`index-static.html\` as \`index.html\`
   - **Any static host**: Just upload the HTML file

## How It Works

The static builder:
1. Reads all \`.md\` files in the directory
2. Embeds all content directly in the HTML
3. Pre-generates a search index
4. Overrides \`fetch()\` to serve content from memory
5. Works completely offline - no server needed!

## File Structure

\`\`\`
docs/
‚îú‚îÄ‚îÄ index.html          # Regular Docsify (needs server)
‚îú‚îÄ‚îÄ index-static.html   # Static version (no server needed)
‚îú‚îÄ‚îÄ build-static.js     # Build script
‚îú‚îÄ‚îÄ _sidebar.md         # Sidebar navigation
‚îî‚îÄ‚îÄ *.md                # Documentation files
\`\`\`

## Search Functionality

The static version includes a pre-generated search index that works client-side. Search will:
- Index all headings (H1, H2, H3)
- Index content text
- Work offline
- No external API calls needed

`
    };
    
    // Embedded sidebar
    window.__staticSidebar = `* [üìö T·ªïng quan API](API_TONG_QUAN_VI.md) `;
    
    // Pre-generated search index
    window.__staticSearchIndex = [{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"# T·ªïng quan API Face Swap AI","url":"#/API_TONG_QUAN_VI.md","level":1},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"T√†i li·ªáu n√†y m√¥ t·∫£ ƒë·∫ßy ƒë·ªß c√°c ƒëi·ªÉm cu·ªëi (endpoint) m√† Cloudflare Worker cung c·∫•p sau khi c·∫≠p nh·∫≠t c·∫•u tr√∫c ph·∫£n h·ªìi v·ªõi tr∆∞·ªùng `debug`.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI - 1. POST `/faceswap`","heading":"1. POST `/faceswap`","text":"## 1. POST `/faceswap`","url":"#/API_TONG_QUAN_VI.md?id=1-post-faceswap","level":2},{"title":"T·ªïng quan API Face Swap AI - N·ªôi dung y√™u c·∫ßu","heading":"N·ªôi dung y√™u c·∫ßu","text":"### N·ªôi dung y√™u c·∫ßu","url":"#/API_TONG_QUAN_VI.md?id=ni-dung-yu-cu","level":3},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- `target_url` (string, b·∫Øt bu·ªôc): URL ·∫£nh m·ª•c ti√™u (preset).","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- `source_url` (string, b·∫Øt bu·ªôc): URL ·∫£nh ngu·ªìn (selfie).","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- `mode` (string, t√πy ch·ªçn): `rapidapi` ho·∫∑c `vertex`. M·∫∑c ƒë·ªãnh `rapidapi`.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- `api_provider` (string, t√πy ch·ªçn): ch·∫•p nh·∫≠n `google-nano-banana` ƒë·ªÉ k√≠ch ho·∫°t ch·∫ø ƒë·ªô Vertex.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- `preset_image_id`, `preset_collection_id`, `preset_name` (string, t√πy ch·ªçn): th√¥ng tin preset ƒë√£ ch·ªçn.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- `selfie_id` (string, t√πy ch·ªçn): m√£ selfie ƒë√£ l∆∞u trong c∆° s·ªü d·ªØ li·ªáu.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- `additional_prompt` (string, t√πy ch·ªçn): c√¢u m√¥ t·∫£ b·ªï sung, ƒë∆∞·ª£c n·ªëi v√†o cu·ªëi tr∆∞·ªùng `prompt` b·∫±ng k√Ω t·ª± `+` (ch·ªâ √°p d·ª•ng cho ch·∫ø ƒë·ªô Vertex).","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- `character_gender` (string, t√πy ch·ªçn): `male`, `female` ho·∫∑c b·ªè tr·ªëng (`none`). N·∫øu truy·ªÅn, h·ªá th·ªëng ch√®n m√¥ t·∫£ gi·ªõi t√≠nh t∆∞∆°ng ·ª©ng v√†o cu·ªëi `prompt","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI - Ph·∫£n h·ªìi th√†nh c√¥ng","heading":"Ph·∫£n h·ªìi th√†nh c√¥ng","text":"### Ph·∫£n h·ªìi th√†nh c√¥ng","url":"#/API_TONG_QUAN_VI.md?id=phn-hi-thnh-cng","level":3},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"resultImageUrl\": \"https://.../results/result_123.jpg\"","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"request\": {","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"mode\": \"vertex\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"targetUrl\": \"https://...\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"sourceUrl\": \"https://...\"","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"provider\": {","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"success\": true,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"statusCode\": 200,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"message\": \"Processing successful\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"finalResultImageUrl\": \"https://.../results/result_123.jpg\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"endpoint\": \"https://...\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"status\": 200,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"durationMs\": 843","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"vertex\": {","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"prompt\": { \"...\": \"...\" },","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"endpoint\": \"https://.../generateContent\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"status\": 200,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"durationMs\": 5180,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"requestPayload\": {","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"promptLength\": 746,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"imageBytes\": 921344","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"vision\": {","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"checked\": false,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"isSafe\": true,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"error\": \"Safety check skipped for Vertex AI mode\"","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"storage\": {","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"attemptedDownload\": true,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"downloadStatus\": 200,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"savedToR2\": true,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"r2Key\": \"results/result_123.jpg\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"publicUrl\": \"https://.../results/result_123.jpg\"","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"database\": {","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"attempted\": true,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"success\": true,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"resultId\": \"result_...\"","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"status\": \"success\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"message\": \"Processing successful\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"code\": 200","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI - Ph·∫£n h·ªìi l·ªói","heading":"Ph·∫£n h·ªìi l·ªói","text":"### Ph·∫£n h·ªìi l·ªói","url":"#/API_TONG_QUAN_VI.md?id=phn-hi-li","level":3},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- L·ªói ki·ªÉm duy·ªát (Google Vision) tr·∫£ v·ªÅ HTTP 422:","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"data\": null,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"provider\": { \"...\": \"...\" },","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"vision\": {","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"checked\": true,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"isSafe\": false,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"violationCategory\": \"adult\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"violationLevel\": \"VERY_LIKELY\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"endpoint\": \"https://vision.googleapis.com/v1/images:annotate\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"status\": 200","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"status\": \"error\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"message\": \"Content blocked: Image contains adult content (VERY_LIKELY)\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"code\": 422","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- C√°c l·ªói kh√°c (RapidAPI, Vertex, l∆∞u tr·ªØ...) tr·∫£ v·ªÅ HTTP t∆∞∆°ng ·ª©ng v·ªõi th√¥ng tin chi ti·∫øt trong `debug.provider.debug` ho·∫∑c `debug.vertex.debug`.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI - 2. POST `/upload-url`","heading":"2. POST `/upload-url`","text":"## 2. POST `/upload-url`","url":"#/API_TONG_QUAN_VI.md?id=2-post-upload-url","level":2},{"title":"T·ªïng quan API Face Swap AI - M·ª•c ƒë√≠ch","heading":"M·ª•c ƒë√≠ch","text":"### M·ª•c ƒë√≠ch","url":"#/API_TONG_QUAN_VI.md?id=mc-ch","level":3},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"T·∫°o URL t·∫°m ƒë·ªÉ tr√¨nh duy·ªát t·∫£i ·∫£nh l√™n th√¥ng qua Worker (`/upload-proxy/{key}`) v√† l·∫•y URL c√¥ng khai R2.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI - N·ªôi dung y√™u c·∫ßu","heading":"N·ªôi dung y√™u c·∫ßu","text":"### N·ªôi dung y√™u c·∫ßu","url":"#/API_TONG_QUAN_VI.md?id=ni-dung-yu-cu","level":3},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- `filename` (string, b·∫Øt bu·ªôc): t√™n t·ªáp.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- `type` (string, b·∫Øt bu·ªôc): `preset` ho·∫∑c `selfie`.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- `presetName` (string, t√πy ch·ªçn): t√™n b·ªô s∆∞u t·∫≠p preset.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- `enableVertexPrompt` (boolean, t√πy ch·ªçn): b·∫≠t t·∫°o prompt Vertex khi upload preset.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI - Ph·∫£n h·ªìi","heading":"Ph·∫£n h·ªìi","text":"### Ph·∫£n h·ªìi","url":"#/API_TONG_QUAN_VI.md?id=phn-hi","level":3},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"uploadUrl\": \"https://<worker-domain>/upload-proxy/preset/example.jpg\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"publicUrl\": \"https://pub-...r2.dev/preset/example.jpg\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"key\": \"preset/example.jpg\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"presetName\": \"Studio Neon\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"enableVertexPrompt\": true","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI - 3. PUT `/upload-proxy/{key}`","heading":"3. PUT `/upload-proxy/{key}`","text":"## 3. PUT `/upload-proxy/{key}`","url":"#/API_TONG_QUAN_VI.md?id=3-put-upload-proxykey","level":2},{"title":"T·ªïng quan API Face Swap AI - M·ª•c ƒë√≠ch","heading":"M·ª•c ƒë√≠ch","text":"### M·ª•c ƒë√≠ch","url":"#/API_TONG_QUAN_VI.md?id=mc-ch","level":3},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"Nh·∫≠n d·ªØ li·ªáu nh·ªã ph√¢n t·ª´ tr√¨nh duy·ªát, l∆∞u v√†o R2 v√† c·∫≠p nh·∫≠t c∆° s·ªü d·ªØ li·ªáu (preset/selfie).","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI - Header quan tr·ªçng","heading":"Header quan tr·ªçng","text":"### Header quan tr·ªçng","url":"#/API_TONG_QUAN_VI.md?id=header-quan-trng","level":3},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- `Content-Type`: mime-type ·∫£nh.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- `X-Preset-Name` (t√πy ch·ªçn): t√™n b·ªô s∆∞u t·∫≠p preset.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- `X-Enable-Vertex-Prompt`, `X-Enable-Vision-Scan` (t√πy ch·ªçn): b·∫≠t Vertex/Vision.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI - Ph·∫£n h·ªìi th√†nh c√¥ng (preset)","heading":"Ph·∫£n h·ªìi th√†nh c√¥ng (preset)","text":"### Ph·∫£n h·ªìi th√†nh c√¥ng (preset)","url":"#/API_TONG_QUAN_VI.md?id=phn-hi-thnh-cng-preset","level":3},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"success\": true,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"url\": \"https://.../preset/example.jpg\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"id\": \"image_...\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"filename\": \"example.jpg\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"hasPrompt\": true,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"prompt_json\": { \"...\": \"...\" },","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"vertex_info\": {","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"success\": true,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"promptKeys\": [\"prompt\", \"style\", \"...\"],","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"endpoint\": \"https://.../generateContent\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"status\": 200,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"responseTimeMs\": 4200","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"vision_scan\": {","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"success\": true,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"isSafe\": true,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"rawResponse\": { \"...\": \"...\" }","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI - Ph·∫£n h·ªìi th√†nh c√¥ng (selfie)","heading":"Ph·∫£n h·ªìi th√†nh c√¥ng (selfie)","text":"### Ph·∫£n h·ªìi th√†nh c√¥ng (selfie)","url":"#/API_TONG_QUAN_VI.md?id=phn-hi-thnh-cng-selfie","level":3},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"success\": true,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"url\": \"https://.../selfie/example.jpg\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"id\": \"selfie_...\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"filename\": \"example.jpg\"","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI - 4. GET `/presets`","heading":"4. GET `/presets`","text":"## 4. GET `/presets`","url":"#/API_TONG_QUAN_VI.md?id=4-get-presets","level":2},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- Tr·∫£ v·ªÅ danh s√°ch preset trong c∆° s·ªü d·ªØ li·ªáu.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- Ph·∫£n h·ªìi d·∫°ng `{ \"presets\": [ { \"id\": \"...\", \"image_url\": \"...\", \"prompt_json\": \"...\", ... } ] }`.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI - 5. DELETE `/presets/{id}`","heading":"5. DELETE `/presets/{id}`","text":"## 5. DELETE `/presets/{id}`","url":"#/API_TONG_QUAN_VI.md?id=5-delete-presetsid","level":2},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- X√≥a preset kh·ªèi D1 v√† R2.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- Ph·∫£n h·ªìi:","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"success\": true,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"message\": \"Preset deleted successfully\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"presetId\": \"...\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"databaseDeleted\": 1,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"r2Deleted\": true,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"r2Key\": \"preset/example.jpg\"","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI - 6. GET `/selfies`","heading":"6. GET `/selfies`","text":"## 6. GET `/selfies`","url":"#/API_TONG_QUAN_VI.md?id=6-get-selfies","level":2},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- Tr·∫£ v·ªÅ t·ªëi ƒëa 50 selfie g·∫ßn nh·∫•t.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- Ph·∫£n h·ªìi d·∫°ng `{ \"selfies\": [ { \"id\": \"...\", \"image_url\": \"...\", \"filename\": \"...\", ... } ] }`.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI - 7. DELETE `/selfies/{id}`","heading":"7. DELETE `/selfies/{id}`","text":"## 7. DELETE `/selfies/{id}`","url":"#/API_TONG_QUAN_VI.md?id=7-delete-selfiesid","level":2},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- X√≥a selfie v√† k·∫øt qu·∫£ li√™n quan.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- Ph·∫£n h·ªìi t∆∞∆°ng t·ª± `/presets/{id}` v·ªõi tr∆∞·ªùng `debug` m√¥ t·∫£ t√°c v·ª•.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI - 8. GET `/results`","heading":"8. GET `/results`","text":"## 8. GET `/results`","url":"#/API_TONG_QUAN_VI.md?id=8-get-results","level":2},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- Tr·∫£ v·ªÅ t·ªëi ƒëa 50 k·∫øt qu·∫£ face swap g·∫ßn nh·∫•t.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- Ph·∫£n h·ªìi: `{ \"results\": [ { \"id\": \"...\", \"result_url\": \"...\", ... } ] }`.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI - 9. DELETE `/results/{id}`","heading":"9. DELETE `/results/{id}`","text":"## 9. DELETE `/results/{id}`","url":"#/API_TONG_QUAN_VI.md?id=9-delete-resultsid","level":2},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- X√≥a k·∫øt qu·∫£ kh·ªèi D1 v√† R2.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- Ph·∫£n h·ªìi:","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"success\": true,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"message\": \"Result deleted successfully\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"resultId\": \"...\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"databaseDeleted\": 1,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"r2Deleted\": true,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"r2Key\": \"results/result_123.jpg\"","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI - 10. GET `/vertex/get-prompt/{preset_image_id}`","heading":"10. GET `/vertex/get-prompt/{preset_image_id}`","text":"## 10. GET `/vertex/get-prompt/{preset_image_id}`","url":"#/API_TONG_QUAN_VI.md?id=10-get-vertexget-promptpreset_image_id","level":2},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- Tr·∫£ v·ªÅ prompt ƒë√£ l∆∞u cho preset.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- Ph·∫£n h·ªìi:","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"success\": true,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"presetImage\": {","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"id\": \"...\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"image_url\": \"...\",","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"hasPrompt\": true,","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"\"promptJson\": { \"...\": \"...\" }","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI - 11. POST `/test-safety`","heading":"11. POST `/test-safety`","text":"## 11. POST `/test-safety`","url":"#/API_TONG_QUAN_VI.md?id=11-post-test-safety","level":2},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- Body: `{ \"image_url\": \"https://...\" }`.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- Ph·∫£n h·ªìi: `{ \"success\": true, \"imageUrl\": \"...\", \"result\": { \"isSafe\": true, ... }, \"timestamp\": \"...\" }`.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI - 12. GET `/test-vertex`","heading":"12. GET `/test-vertex`","text":"## 12. GET `/test-vertex`","url":"#/API_TONG_QUAN_VI.md?id=12-get-test-vertex","level":2},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- Ki·ªÉm tra k·∫øt n·ªëi Vertex (li·ªát k√™ model).","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"- Ph·∫£n h·ªìi ch·ª©a tr·∫°ng th√°i HTTP th·ª±c t·∫ø, danh s√°ch model v√† l·ªói n·∫øu c√≥.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"C√°c ph·∫£n h·ªìi l·ªói t·ª´ Worker ƒë·ªÅu tu√¢n th·ªß m·ªôt trong hai d·∫°ng:","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"1. L·ªói chung: `{ \"Success\": false, \"Message\": \"...\", \"StatusCode\": 500, \"Debug\": { ... } }` (ƒë·ªëi v·ªõi c√°c endpoint c≈© ch∆∞a chuy·ªÉn sang c·∫•u tr√∫c m·ªõi).","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"2. L·ªói chu·∫©n h√≥a: `{ \"data\": null, \"debug\": { ... }, \"status\": \"error\", \"message\": \"...\", \"code\": 4xx/5xx }`.","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"T·ªïng quan API Face Swap AI","heading":"T·ªïng quan API Face Swap AI","text":"Tr∆∞·ªùng `debug` lu√¥n ch·ª©a th√¥ng tin chi ti·∫øt gi√∫p truy v·∫øt: endpoint g·ªçi t·ªõi, th·ªùi gian ph·∫£n h·ªìi, payload g·ª≠i ƒëi, ph·∫£n h·ªìi g·ªëc (ƒë√£ ƒë∆∞·ª£c kh·ª≠ d·ªØ li·ªáu nh·∫°","url":"#/API_TONG_QUAN_VI.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"# Static Docsify Documentation","url":"#/README.md","level":1},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"This directory contains the API documentation that can be built as a fully static HTML file with working search functionality.","url":"#/README.md","level":0},{"title":"Static Docsify Documentation - Building Static Documentation","heading":"Building Static Documentation","text":"## Building Static Documentation","url":"#/README.md?id=building-static-documentation","level":2},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"To generate a static HTML file with all content embedded and working search:","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"node build-static.js","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"This will create `index-static.html` which is a single, self-contained HTML file that:","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"- ‚úÖ Contains all markdown content embedded","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"- ‚úÖ Has working search functionality","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"- ‚úÖ Works without a server (can be opened directly in browser)","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"- ‚úÖ Can be deployed to any static hosting (Cloudflare Pages, GitHub Pages, etc.)","url":"#/README.md","level":0},{"title":"Static Docsify Documentation - Usage","heading":"Usage","text":"## Usage","url":"#/README.md?id=usage","level":2},{"title":"Static Docsify Documentation - For Local Development","heading":"For Local Development","text":"### For Local Development","url":"#/README.md?id=for-local-development","level":3},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"1. Use the regular `index.html` with Docsify server:","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"docsify serve .","url":"#/README.md","level":0},{"title":"Static Docsify Documentation - For Static Hosting","heading":"For Static Hosting","text":"### For Static Hosting","url":"#/README.md?id=for-static-hosting","level":3},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"1. Build the static version:","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"node build-static.js","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"2. Deploy `index-static.html` to your static hosting:","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"- **Cloudflare Pages**: Upload `index-static.html` and rename it to `index.html`","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"- **GitHub Pages**: Commit `index-static.html` as `index.html`","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"- **Any static host**: Just upload the HTML file","url":"#/README.md","level":0},{"title":"Static Docsify Documentation - How It Works","heading":"How It Works","text":"## How It Works","url":"#/README.md?id=how-it-works","level":2},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"The static builder:","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"1. Reads all `.md` files in the directory","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"2. Embeds all content directly in the HTML","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"3. Pre-generates a search index","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"4. Overrides `fetch()` to serve content from memory","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"5. Works completely offline - no server needed!","url":"#/README.md","level":0},{"title":"Static Docsify Documentation - File Structure","heading":"File Structure","text":"## File Structure","url":"#/README.md?id=file-structure","level":2},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"‚îú‚îÄ‚îÄ index.html          # Regular Docsify (needs server)","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"‚îú‚îÄ‚îÄ index-static.html   # Static version (no server needed)","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"‚îú‚îÄ‚îÄ build-static.js     # Build script","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"‚îú‚îÄ‚îÄ _sidebar.md         # Sidebar navigation","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"‚îî‚îÄ‚îÄ *.md                # Documentation files","url":"#/README.md","level":0},{"title":"Static Docsify Documentation - Search Functionality","heading":"Search Functionality","text":"## Search Functionality","url":"#/README.md?id=search-functionality","level":2},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"The static version includes a pre-generated search index that works client-side. Search will:","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"- Index all headings (H1, H2, H3)","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"- Index content text","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"- Work offline","url":"#/README.md","level":0},{"title":"Static Docsify Documentation","heading":"Static Docsify Documentation","text":"- No external API calls needed","url":"#/README.md","level":0}];
    
    // Configure Docsify
    window.$docsify = {
      name: 'Face Swap AI API',
      repo: '',
      loadSidebar: true,
      subMaxLevel: 3,
      auto2top: true,
      homepage: 'API_TONG_QUAN_VI.md',
      coverpage: false,
      search: {
        maxAge: 86400000,
        paths: ["API_TONG_QUAN_VI.md","README.md"],
        placeholder: 'T√¨m ki·∫øm...',
        noData: 'Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£',
        depth: 6
      },
      notFoundPage: true,
      executeScript: true,
      pagination: {
        previousText: 'Tr∆∞·ªõc',
        nextText: 'Ti·∫øp',
        crossChapter: true,
        crossChapterText: true,
      },
      plugins: [
        function(hook, vm) {
          // Override sidebar loading
          hook.beforeEach(function(html) {
            return html;
          });
          
          hook.mounted(function() {
            // Inject sidebar content
            const sidebarEl = document.querySelector('.sidebar');
            if (sidebarEl && window.__staticSidebar) {
              // Docsify will load sidebar, but we can pre-populate it
            }
            
            // Ensure sidebar is expanded by default
            setTimeout(() => {
              const sidebar = document.querySelector('.sidebar');
              const app = document.querySelector('#app');
              if (sidebar && app) {
                sidebar.style.transform = 'translateX(0)';
                sidebar.style.display = 'block';
                app.classList.remove('close');
              }
            }, 100);
          });
          
          // Override fetch to serve from embedded content
          const originalFetch = window.fetch;
          window.fetch = function(url, options) {
            if (typeof url === 'string') {
              // Handle markdown files
              if (url.endsWith('.md') || url.includes('.md')) {
                const fileName = url.split('/').pop().split('?')[0];
                if (window.__staticDocs[fileName]) {
                  return Promise.resolve(new Response(
                    window.__staticDocs[fileName],
                    { headers: { 'Content-Type': 'text/markdown; charset=utf-8' } }
                  ));
                }
              }
              // Handle sidebar
              if (url.includes('_sidebar.md') || url.endsWith('_sidebar')) {
                return Promise.resolve(new Response(
                  window.__staticSidebar,
                  { headers: { 'Content-Type': 'text/markdown; charset=utf-8' } }
                ));
              }
            }
            return originalFetch.apply(this, arguments);
          };
          
          // Inject search index when search plugin loads
          hook.doneEach(function() {
            if (window.Docsify && window.Docsify.util && window.__staticSearchIndex) {
              // Try to set search index
              setTimeout(() => {
                const searchPlugin = window.Docsify.dom.find('.search input');
                if (searchPlugin && !window.__searchIndexSet) {
                  // Store index globally for search plugin
                  window.DocsifySearchIndex = window.__staticSearchIndex;
                  window.__searchIndexSet = true;
                }
              }, 100);
            }
          });
        },
        // Custom search plugin that uses pre-generated index
        function(hook, vm) {
          hook.ready(function() {
            if (window.__staticSearchIndex) {
              // Override search functionality
              const searchInput = document.querySelector('.search input');
              if (searchInput) {
                searchInput.addEventListener('input', function(e) {
                  const query = e.target.value.toLowerCase().trim();
                  if (query.length < 2) return;
                  
                  const results = window.__staticSearchIndex.filter(item => {
                    const searchText = (item.title + ' ' + item.text).toLowerCase();
                    return searchText.includes(query);
                  });
                  
                  // Display results (simplified - Docsify will handle UI)
                  console.log('Search results:', results.length);
                });
              }
            }
          });
        }
      ]
    };
  </script>
  
  <script src="https://cdn.jsdelivr.net/npm/docsify@4"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify/lib/plugins/pagination.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify/lib/plugins/emoji.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify/lib/plugins/external-script.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify/lib/plugins/zoom-image.min.js"></script>
</body>
</html>